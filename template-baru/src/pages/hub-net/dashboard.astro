---
import api from "@assets/js/axios-request.js";
import "@assets/libs/apex-charts/apex-charts.scss";
import CardCongratulations from "@components/Back/CardCongratulations.astro";
import Layout from "@layouts/Layout.astro";
const cookieHeader = Astro.request.headers.get("cookie") || "";
const cookies = Object.fromEntries(cookieHeader.split("; ").map(c => c.split("=")));
const token = cookies["auth_token"];
api.token = token;
const response = await api.axios.get("/hubnet/last-sending");
const data = response.data;
---

<!-- Vendors CSS -->
<link rel='stylesheet' href='/vendor/libs/perfect-scrollbar/perfect-scrollbar.css' />
<link rel='stylesheet' href='/vendor/libs/typeahead-js/typeahead.css' />
<link rel='stylesheet' href='/vendor/libs/datatables-bs5/datatables.bootstrap5.css' />
<link rel='stylesheet' href='/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.css' />
<link rel='stylesheet' href='/vendor/libs/apex-charts/apex-charts.css' />
<link rel='stylesheet' href='/vendor/libs/swiper/swiper.css' />

<!-- Page CSS -->
<link rel='stylesheet' href='/css/pages/cards-statistics.css' />
<link rel='stylesheet' href='/css/pages/cards-analytics.css' />
<Layout title='Dashboard HUBNET'>
  <!-- Content -->

  <div class='container-xxl flex-grow-1 container-p-y'>
    <div class='row gy-4 mb-4'>
      <CardCongratulations data={data} />

      <!-- Total Profit -->
      <div class='col-xl-2 col-md-3 col-sm-6'>
        <div class='card h-100'>
          <div class='card-body'>
            <div class='d-flex justify-content-between align-items-start flex-wrap gap-2'>
              <div class='avatar'>
                <div class='avatar-initial bg-label-primary rounded'>
                  <i class='mdi mdi-cart-plus mdi-24px'></i>
                </div>
              </div>
              <div class='d-flex align-items-center'>
                <p class='mb-0 text-success me-1'>+22%</p>
                <i class='mdi mdi-chevron-up text-success'></i>
              </div>
            </div>
            <div class='card-info mt-4 pt-1'>
              <h5 class='mb-2'>155k</h5>
              <p>Total Order</p>
              <div class='badge bg-label-secondary rounded-pill'>Last 4 Month</div>
            </div>
          </div>
        </div>
      </div>
      <!--/ Total Profit -->

      <!-- Total Expenses -->
      <div class='col-xl-2 col-md-3 col-sm-6'>
        <div class='card h-100'>
          <div class='card-body'>
            <div class='d-flex justify-content-between align-items-start flex-wrap gap-2'>
              <div class='avatar'>
                <div class='avatar-initial bg-label-success rounded'>
                  <i class='mdi mdi-currency-usd mdi-24px'></i>
                </div>
              </div>
              <div class='d-flex align-items-center'>
                <p class='mb-0 text-success me-1'>+38%</p>
                <i class='mdi mdi-chevron-up text-success'></i>
              </div>
            </div>
            <div class='card-info mt-4 pt-1'>
              <h5 class='mb-2'>$13.4k</h5>
              <p>Total Sales</p>
              <div class='badge bg-label-secondary rounded-pill'>Last Six Month</div>
            </div>
          </div>
        </div>
      </div>
      <!--/ Total Expenses -->
    </div>
    <div class='row gy-4'>
      <!-- Weekly Overview Chart -->
      <div class='col-xl-4 col-md-6'>
        <div class='card'>
          <div class='card-header'>
            <div class='d-flex justify-content-between'>
              <h5 class='mb-1'>Weekly Overview</h5>
              <div class='dropdown'>
                <button
                  class='btn p-0'
                  type='button'
                  id='weeklyOverviewDropdown'
                  data-bs-toggle='dropdown'
                  aria-haspopup='true'
                  aria-expanded='false'>
                  <i class='mdi mdi-dots-vertical mdi-24px'></i>
                </button>
                <div class='dropdown-menu dropdown-menu-end' aria-labelledby='weeklyOverviewDropdown'>
                  <a class='dropdown-item' href='javascript:void(0);'>Last 28 Days</a>
                  <a class='dropdown-item' href='javascript:void(0);'>Last Month</a>
                  <a class='dropdown-item' href='javascript:void(0);'>Last Year</a>
                </div>
              </div>
            </div>
          </div>
          <div class='card-body'>
            <div id='weeklyOverviewChart'></div>
            <div class='mt-1'>
              <div class='d-flex align-items-center gap-3'>
                <h3 class='mb-0'>62%</h3>
                <p class='mb-0'>Your sales performance is 35% ðŸ˜Ž better compared to last month</p>
              </div>
              <div class='d-grid mt-3'>
                <button class='btn btn-primary' type='button'>Details</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--/ Weekly Overview Chart -->

      <!-- Roles Datatables -->
      <div class='col-lg-12 col-12'>
        <div class='card'>
          <div class='table-responsive rounded-3'>
            <table class='datatables-crm table table-sm'>
              <thead class='table-light'>
                <tr>
                  <th class='py-3'></th>
                  <th class='py-3'>User</th>
                  <th class='py-3'>Email</th>
                  <th class='py-3'>Role</th>
                  <th class='py-3'>Status</th>
                </tr>
              </thead>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- / Content -->
</Layout>
<script src='@assets/libs/apex-charts/apexcharts.js'></script>
